# Переменные окружения для EAS Build (APK/IPA)

При сборке через **EAS Build** локальный файл `.env` **не используется**. Чтобы в приложении были нужные значения, их нужно задать в Expo.

## Почему приложение вылетает на телефоне

Если при открытии скачанного APK приложение сразу закрывается — скорее всего в сборке **нет** переменных для Supabase. Без них клиент Supabase не может работать, и при первом же запросе (например, проверка сессии) приложение падает.

## Что сделать

### 1. Добавить переменные в EAS

1. Открой [expo.dev](https://expo.dev) → зайди в аккаунт **webnum.com** → проект **ai-lawyer**.
2. В левом меню: **Project** → **Environment variables** (или **Settings** → **Environment variables**).
3. Выбери окружение **production** (то же, что в `eas build --profile production`).
4. Добавь две переменные (значения возьми из своего локального `.env`):

   | Name | Value | Visibility |
   |------|--------|-------------|
   | `EXPO_PUBLIC_SUPABASE_URL` | `https://твой-проект.supabase.co` | Plain text |
   | `EXPO_PUBLIC_SUPABASE_ANON_KEY` | `твой_anon_ключ` | Secret (рекомендуется) или Plain text |

5. Сохрани.

### 2. Пересобрать APK

В терминале в папке проекта:

```bash
npx eas-cli build --platform android --profile production
```

После сборки заново скачай APK и установи на Samsung — приложение должно запускаться.

### Для iOS

Те же переменные уже будут использоваться для профиля **production**. Сборка:

```bash
npx eas-cli build --platform ios --profile production
```

---

**Важно:** переменные с префиксом `EXPO_PUBLIC_` подставляются в код на этапе сборки. После изменения переменных в EAS нужно каждый раз заново запускать сборку.
